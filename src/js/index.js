$(document).ready(e => {

  let divx = divy = 512.;

  $('#inc').click(e => {
    divx += 32;
    divy += 32;
  })

  $('#dec').click(e => {
    divy -= 32;
    divx -= 32;

    divy = Math.min(divy, 4);
    divx = Math.min(divx, 4);
  })

  var emojis = ['😀','😬','😂','😄','😅','😇','☺️','😋','😘','😚','😜','🤑','😎','🤗','😳','🙄','😤','😱','😨','😰','😥','🤒','😭','💩','👹','💀','👻','👽','🤖','😺','😹','😻','😼','😽','🙀','😿','😾','🙌','👏','👋','👍','👊','✊','✌️','👌','✋','👐','💪','☝️','🙏','👆','🖐','🤘','🖖','✍️','💅','👄','👅','👂','👁','👀','👶','👦','👧','👨','👩','👱','👴','👵','👲','👳','👷','💂','🕵','🎅','👼','👸','👰','🚶','🏃','💃','👯','👫','👬','👭','🙇','💁','🙅','🙆','🙋','🙎','🙍','💇','💆','💑','👨‍❤️‍👨','💏','👩‍❤️‍💋‍👩','👨‍❤️‍💋‍👨','👩‍👩‍👦','👨‍👨‍👦','👮','👚','👕','👖','👔','👗','👙','👘','💄','💋','🎩','👟','👞','👢','👡','👠','👣','⛑','🎓','👑','🎒','👝','👛','👜','💼','🌂','💍','🕶','👓','🐯','🦁','🐮','🐷','🐽','🐸','🐙','🐵','🐦','🐧','🐔','🐒','🙉','🙈','🐣','🐥','🐺','🐗','🐴','🦄','🐝','🐛','🐢','🦀','🦂','🕷','🐜','🐞','🐌','🐠','🐟','🐡','🐬','🐋','🐊','🐆','🐘','🐫','🐪','🐄','🐂','🐃','🐏','🐑','🐀','🐁','🐓','🦃','🐉','🐾','🐿','🐇','🐈','🐩','🐕','🐲','🌵','🎄','🌲','🌴','🌱','🌿','🌾','🍁','🍂','🍃','🎋','🎍','🍀','🌺','🌻','🌹','🌷','🌼','🌸','💐','🍄','🎃','🐚','🌎','🌍','🌏','🌕','🌖','🌗','🌘','🌑','🌒','🌓','🌔','🌚','🌝','🌛','🌜','🌞','⭐️','🌟','💫','✨','☄️','🌥','🌦','🌧','⛈','⚡️','🔥','❄️','🌨','☔️','☂️','🌪','💨','☃️','⛄️','💧','💦','🌊','🍏','🍎','🍐','🍋','🍌','🍉','🍇','🌶','🍅','🍍','🍑','🍈','🍓','🌽','🍠','🍯','🍞','🍗','🧀','🍖','🍤','🌯','🌮','🍝','🍕','🌭','🍟','🍔','🍳','🍜','🍲','🍥','🍣','🍱','🍛','🍙','🍚','🎂','🍰','🍦','🍨','🍧','🍡','🍢','🍘','🍮','🍬','🍭','🍫','🍿','🍩','🍪','🍺','☕️','🍵','🍶','🍹','🍻','🍼','🍴','🍷','🍽','⚽️','🏀','🏈','⚾️','🎾','🏐','🏉','🎱','🎿','🏏','🏑','🏓','🏌','⛳️','⛷','🏂','⛸','🏹','🎣','🚣','🏊🏼','🏄','🏆','🕴','🏇','🚵','🚴','🏋','⛹','🛀','🎽','🏅','🎖','🎗','🏵','🎫','🎟','🎭','🎺','🎷','🎹','🎤','🎪','🎨','🎸','🎻','🎬','🎮','👾','🎯','🎲','🎰','🎳','🚗','🚕','🚙','🚌','🚎','🏎','🚓','🚒','🚐','🚛','🚜','🏍','🚲','🚨','🚃','🚟','🚠','🚡','🚖','🚘','🚍','🚔','🚋','🚝','🚄','🚅','🚈','🚞','🚂','🚆','🛬','🛫','✈️','🛩','🚁','🚉','🚊','🚇','⛵️','🛥','🚤','⛴','🚀','🛳','🛰','💺','🏁','🚥','🚦','🚏','⛽️','🚧','⚓️','🎡','🎢','🎠','🏗','🌁','🗼','🏭','⛲️','⛺️','🏕','🗾','🌋','🗻','🏔','⛰','🎑','🏞','🛣','🛤','🌅','🌄','🏜','🏖','🏝','🎇','🌠','🌌','🌉','🌃','🏙','🌆','🌇','🎆','🌈','🏘','🏰','🏯','🏠','🗽','🏟','🏡','🏚','🏢','🏬','🏣','🏤','🏥','🏦','🕌','⛪️','🏛','💒','🏩','🏫','🏪','🏨','🕍','🕋','⛩','🕹','💽','💾','💿','📼','📷','📹','🎥','☎️','⏱','🎙','📻','📺','📠','📟','⏲','⏰','🕰','⏳','📡','🔋','💴','💵','💸','🛢','🔦','💡','💶','💷','💰','💳','💎','🔨','💣','🔫','🔪','☠️','🔮','💈','💊','💉','🔖','🚿','🔑','🛋','🚪','🛎','🖼','🎁','🎀','🎏','🎈','🛍','⛱','🗺','🎊','🎉','🎎','🎐','🎌','🏮','📮','📫','📯','📊','🗃','📇','📅','📉','📈','📰','📕','📙','📒','✂️','🖇','📖','📚','📌','📍','🚩','❤️','💔','❣️','💕','💓','💗','💖','💘','💝','💠','🔔'];

  var s = function(p){

    p.setup = function(){
      console.log(emojis.length, emojis[0]);

      let t = navigator.userAgent;
      let time = 0;
      let canvas = p.createCanvas(0, 0);

      canvas.remove()

      noise.seed(Math.floor(Math.random()*65536));

      var div = $(`<div>${t}</div>`);
      $('#container').append(div);

      setInterval(e => {
        t = '';

        for (var y = 0; y < Math.floor((window.innerHeight)/50); y++){
          for (var x = 0; x < Math.floor((window.innerWidth)/42); x++){
            // var n = noise.perlin3(x/divx, y/divy, time);
            var vx = (x)/divx + 4.*Math.cos(x/256.);
            var vy = (y)/divy + 4.*Math.sin(y/256.);
            var n = noise.perlin3(vx, vy, time);
            t += emojis[Math.floor(fmap(n, -1, 1, 0, emojis.length-1))];
          }

          t += '\n'
        }
        div.text(t);
        time += 0.001;
      }, 64);

    };

   };

  var fmap = function(n, start1, stop1, start2, stop2) {
    return ((n-start1)/(stop1-start1))*(stop2-start2)+start2;
};

   var f = new p5(s, 'container'); 
});
